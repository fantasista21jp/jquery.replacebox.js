(function(c){c.fn.replacebox=function(a){function k(){e=a.appendTo&&"object"===typeof a.appendTo&&0<a.appendTo.length?a.appendTo:b.children(a.appendTo);e.each(function(b){var g=c(this),d=c(a.handleUp,g),f=c(a.handleDown,g);0===b&&a.handleOff?d.css("visibility","hidden"):d.css("visibility","");d.unbind("click").click(function(){v("up",b);return!1});b>=e.length-1&&a.handleOff?f.css("visibility","hidden"):f.css("visibility","");f.unbind("click").click(function(){v("down",b);return!1});n.push(g)});!0===
a.sortable&&B();w()}function v(g,p){if(!0===c.data(b.get(0),"replacebox-enabled")){var d=n[p],f=e.index(d);if(0!==d.length){switch(g){case "up":if(0===f)return;var h=c(e.get(f-1));break;case "down":if(f>=n.length-1)return;h=c(e.get(f+1));break;default:return}x();if(!0!==a.checkFunc(d,h,e,g))w();else{c.isFunction(a.beforeFunc)&&a.beforeFunc(d,h,e,g);f=d.position();var k=h.position(),l=d.clone(!0).appendTo(b),m=h.clone(!0).appendTo(b),q=l.clone(!0).replaceAll(h).css("visibility","hidden"),r=m.clone(!0).replaceAll(d).css("visibility",
"hidden");d=q.position();h=r.position();l.css({position:"absolute",top:f.top,left:f.left,zIndex:a.zIndex+1});m.css({position:"absolute",top:k.top,left:k.left,zIndex:a.zIndex});var t=!1,u=!1;l.animate({top:d.top,left:d.left},a.speed,a.easing,function(){t=!0;!0===u&&(t=!1,y(l,m,q,r,g))});m.animate({top:h.top,left:h.left},a.speed,a.easing,function(){u=!0;!0===t&&(u=!1,y(l,m,q,r,g))})}}}}function y(b,p,d,f,h){b.remove();p.remove();d.css("visibility","");f.css("visibility","");z();c.isFunction(a.afterFunc)&&
a.afterFunc(d,f,e,h)}function B(){a.sortableOption=c.extend(a.sortableOption,{items:e,start:function(b,e){c.isFunction(a.sortableBeforeFunc)&&a.sortableBeforeFunc(b,e)},update:function(c,e){!1===a.sortableCheckFunc(c,e)&&b.sortable("cancel")},stop:function(b,e){z();c.isFunction(a.sortableAfterFunc)&&a.sortableAfterFunc(b,e)},disabled:!1});b.sortable(a.sortableOption);b.sortable("option","handle")?c(b.sortable("option","handle"),b).disableSelection():b.disableSelection()}function w(){c.data(b.get(0),
"replacebox-enabled",!0);!0===a.sortable&&b.sortable({disabled:!1})}function x(){c.data(b.get(0),"replacebox-enabled",!1);!0===a.sortable&&b.sortable({disabled:!0})}function z(){"string"===typeof a&&(a=c.data(b.get(0),"replacebox-configs"));null!==a&&(b=c(b.selector),n=[],k())}var A={appendTo:null,zIndex:999,handleUp:".up",handleDown:".down",handleOff:!0,speed:500,easing:"swing",checkFunc:function(){return!0},beforeFunc:null,afterFunc:null,sortable:!1,sortableOption:{},sortableCheckFunc:function(){return!0},
sortableBeforeFunc:null,sortableAfterFunc:null},b=this;if("object"!==typeof b||1!==b.length)return this;var e,n=[];if(a){if("string"===typeof a){if(a.match(/^_/))return this;try{eval(a)()}catch(g){"console"in window&&console.log(g)}return this}a=c.extend(A,a)}else a=A;c.data(b.get(0),"replacebox-position",!1);b.css("position")&&"static"!=b.css("position")||(c.data(b.get(0),"replacebox-position",b.css("position")?b.css("position"):!1),b.css("position","relative"));c.data(b.get(0),"replacebox-configs",
a);x();k();return this}})(jQuery);
